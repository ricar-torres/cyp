<md-content layout-margin layout-padding>
  <button
    mat-raised-button
    class="mat-raised-button mb-1"
    color="primary"
    (click)="createThread(null)"
  >
    {{ 'DOCUMENTATION_CALL_LIST.ADD_BTN' | translate }}
  </button>
  <!-- <button
    mat-raised-button
    class="mat-raised-button mb-1"
    color="primary"
    (click)="callSuccessDialog()"
  >
    {{ 'DOCUMENTATION_CALL_LIST.ADD_BTN' | translate }}
  </button> -->
  <mat-accordion>
    <mat-expansion-panel
      [togglePosition]="'after'"
      *ngFor="let masterThread of threads"
    >
      <mat-expansion-panel-header
        collapsedHeight="*"
        expandedHeight="*"
        (opened)="panelOpenState = true"
        (closed)="panelOpenState = false"
      >
        <mat-card class="mat-elevation-z0">
          <mat-card-header>
            <div fxLayout="row" fxFlex="50">
              <div mat-card-avatar class="avatarImage"></div>
              <mat-card-title
                >#{{ masterThread.confirmationNumber }}
                <mat-card-subtitle>{{
                  masterThread.createdAt | date: 'yyyy-MM-dd HH:ss'
                }}</mat-card-subtitle>
              </mat-card-title>
            </div>
            <div fxLayout="column" fxLayoutAlign="start end" fxFlex="50">
              <mat-card-subtitle>
                {{ 'DOCUMENTATION_CALL_LIST.TYPE_CALL' | translate }}:
                {{ masterThread.callType }}
              </mat-card-subtitle>
            </div>
          </mat-card-header>
          <mat-card-content>
            {{ masterThread.comment }}
          </mat-card-content>
          <mat-card-actions>
            <button
              mat-raised-button
              matBadge="{{ masterThread.threads.length }}"
              color="accent"
              [matBadgeHidden]="masterThread.threads.length < 1"
              (click)="createThread(masterThread.confirmationNumber)"
            >
              {{ 'DOCUMENTATION_CALL_LIST.THREAD' | translate }}
            </button>
          </mat-card-actions>
          <mat-card-footer> </mat-card-footer>
        </mat-card>
      </mat-expansion-panel-header>
      <mat-divider *ngIf="masterThread.threads.length > 0"></mat-divider>

      <mat-card
        class="mat-elevation-z0"
        *ngFor="let thread of masterThread.threads; last as isLast"
      >
        <mat-card-header>
          <div fxLayout="row" fxFlex="50">
            <div mat-card-avatar class="avatarImage"></div>
            <mat-card-title
              >#{{ thread.confirmationNumber }}
              <mat-card-subtitle>{{
                thread.createdAt | date: 'yyyy-MM-dd HH:ss'
              }}</mat-card-subtitle></mat-card-title
            >
          </div>
          <div fxLayout="column" fxLayoutAlign="start end" fxFlex="50">
            <mat-card-subtitle>
              {{ 'DOCUMENTATION_CALL_LIST.TYPE_CALL' | translate }}:
              {{ thread.callType }}
            </mat-card-subtitle>
          </div>
        </mat-card-header>
        <mat-card-content>
          {{ thread.comment }}
        </mat-card-content>
        <mat-divider *ngIf="!isLast"></mat-divider>
      </mat-card>
    </mat-expansion-panel>
  </mat-accordion>
  <div class="loading-indicator" [hidden]="!loading">
    <mat-progress-spinner [mode]="'indeterminate'"> </mat-progress-spinner>
  </div>
</md-content>
<router-outlet></router-outlet>
