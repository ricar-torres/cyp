<mat-horizontal-stepper
  [linear]="true"
  #stepper
  *ngIf="affiliationMethod && benefits"
>
  <mat-step [stepControl]="affiliationMethod">
    <form [formGroup]="affiliationMethod">
      <ng-template matStepLabel>{{
        'ALLIANCEWIZARD.AFFILIATIONMETHODS' | translate
      }}</ng-template>
      <div
        class="top-margin-10 full-height"
        fxLayout="column"
        fxLayoutAlign="center"
      >
        <mat-radio-group
          aria-label="Select an option"
          [formControl]="affiliationMethod.get('affiliationMethod')"
        >
          <mat-radio-button value="1">{{
            'ALLIANCEWIZARD.QUALIFYINGEVENT' | translate
          }}</mat-radio-button>
          <mat-radio-button value="2">{{
            'ALLIANCEWIZARD.RENOVATIONAFILIATION' | translate
          }}</mat-radio-button>
        </mat-radio-group>
        <mat-form-field>
          <mat-label>{{
            'ALLIANCEWIZARD.QUALIFYINGEVENT' | translate
          }}</mat-label>
          <mat-select [formControl]="affiliationMethod.get('qualifyingEvent')">
            <mat-option *ngFor="let qfe of qualifyingEvents" [value]="qfe.id">
              {{ qfe.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <button
        class="button-space"
        mat-raised-button
        color="primary"
        matStepperNext
      >
        {{ 'NEXT' | translate }}
      </button>
    </form>
  </mat-step>
  <mat-step [stepControl]="benefits">
    <ng-template matStepLabel>{{
      'ALLIANCEWIZARD.BENEFITS' | translate
    }}</ng-template>
    <form [formGroup]="benefits">
      <div
        fxLayout
        fxLayoutAlign="center"
        fxLayout.lt-md="column"
        fxLayoutGap="10px"
      >
        <mat-form-field fxFlex>
          <mat-label>{{ 'ALLIANCEWIZARD.HEALTHPLAN' | translate }}</mat-label>
          <mat-select [formControl]="benefits.get('HealthPlan')">
            <mat-option [value]="item.id" *ngFor="let item of healthPlans">{{
              item.name
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex>
          <mat-label>{{ 'ALLIANCEWIZARD.COVER' | translate }}</mat-label>
          <mat-select
            #coverSelection
            [formControl]="benefits.get('Addititons')"
          >
            <mat-option [value]="item.id" *ngFor="let item of covers">{{
              item.name
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </form>

    <mat-card *ngIf="coverSelection.value" class="margin-bottom-10">
      <div>
        <mat-slide-toggle
          (change)="clearIsuranceDependants($event.checked)"
          #dependantsEnabled
          >{{ 'ALLIANCEWIZARD.LIFEINSURANCE' | translate }}</mat-slide-toggle
        >
      </div>
      <mat-card-content *ngIf="dependantsEnabled.checked">
        <div>
          <div
            @fadeAnimation
            *ngFor="let item of percentageDependent; let i = index"
          >
            <form [formGroup]="item">
              <div
                fxLayout
                fxLayoutAlign="center"
                fxLayout.lt-md="column"
                fxLayoutGap="10px"
              >
                <mat-form-field fxFlex="20%">
                  <mat-label>{{ 'NAME' | translate }}</mat-label>
                  <input matInput [formControl]="item.get('name')" />
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <mat-label>{{ 'GENDER' | translate }}</mat-label>
                  <mat-select
                    #coverSelection
                    [formControl]="item.get('gender')"
                  >
                    <mat-option [value]="1">{{
                      'MALE' | translate
                    }}</mat-option>
                    <mat-option [value]="2">{{
                      'FEMALE' | translate
                    }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <mat-label>{{ 'BIRTHDATE' | translate }}</mat-label>
                  <input
                    [matDatepicker]="birthDatePiker"
                    matInput
                    [formControl]="item.get('birthDate')"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="birthDatePiker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker
                    #birthDatePiker
                    disabled="false"
                  ></mat-datepicker>
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <mat-label>{{ 'RELATION' | translate }}</mat-label>
                  <mat-select
                    #coverSelection
                    [formControl]="item.get('relation')"
                  >
                    <mat-option
                      *ngFor="let item of typesOfRelation"
                      [value]="item.id"
                      >{{ item.name }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="20%">
                  <!-- <mat-label>{{ 'USER.NAME' | translate }}</mat-label> -->
                  <input matInput [formControl]="item.get('percent')" />
                </mat-form-field>
                <button
                  fxFlex="20%"
                  type="button"
                  color="warn"
                  mat-button
                  (click)="deleteDependant(i)"
                >
                  <mat-icon>delete</mat-icon> Delete
                </button>
              </div>
            </form>
          </div>
          <button mat-raised-button color="primary" (click)="addDependant()">
            AÃ±adir Beneficiario
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <button mat-raised-button color="primary" matStepperPrevious>
      {{ 'GOBACK' | translate }}
    </button>
    <button
      class="button-space"
      mat-raised-button
      color="primary"
      matStepperNext
    >
      {{ 'NEXT' | translate }}
    </button>
  </mat-step>
  <mat-step [stepControl]="finalFormGroup">
    <form
      [formGroup]="finalFormGroup"
      fxLayoutAlign="center"
      fxLayoutGap="10px"
      fxLayout.lt-md="column"
    >
      <mat-form-field fxFlex>
        <mat-label>{{ 'ALLIANCEWIZARD.EFFECTIVEDATE' | translate }}</mat-label>
        <input
          [matDatepicker]="effectiveDatePiker"
          matInput
          formControlName="effectiveDate"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="effectiveDatePiker"
        ></mat-datepicker-toggle>
        <mat-datepicker #effectiveDatePiker disabled="false"></mat-datepicker>
      </mat-form-field>
      <mat-form-field fxFlex>
        <mat-label>{{ 'ALLIANCEWIZARD.ELEGBILITYDATE' | translate }}</mat-label>
        <input
          [matDatepicker]="eligibiliyDatePiker"
          matInput
          formControlName="eligibiliyDate"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="eligibiliyDatePiker"
        ></mat-datepicker-toggle>
        <mat-datepicker #eligibiliyDatePiker disabled="false"></mat-datepicker>
      </mat-form-field>
      <mat-form-field fxFlex>
        <mat-label>{{
          'ALLIANCEWIZARD.INSCRIPTIONTYPE' | translate
        }}</mat-label>
        <mat-select formControlName="inscriptionType"> </mat-select>
      </mat-form-field>
      <mat-form-field fxFlex>
        <mat-label>{{
          'ALLIANCEWIZARD.INSCRIPTIONSTATUS' | translate
        }}</mat-label>
        <mat-select formControlName="inscriptionStatus"> </mat-select>
      </mat-form-field>
    </form>
    <button mat-raised-button color="primary" matStepperPrevious>
      {{ 'GOBACK' | translate }}
    </button>
    <button mat-raised-button color="primary" matStepperNext>
      {{ 'FINISH' | translate }}
    </button>
  </mat-step>
</mat-horizontal-stepper>
